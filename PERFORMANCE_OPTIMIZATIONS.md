# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è quiz-code.com

## üìä –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Brotli —Å–∂–∞—Ç–∏—è**
- Gzip —Å–∂–∞—Ç–∏–µ –µ—Å—Ç—å, –Ω–æ Brotli –¥–∞–µ—Ç –Ω–∞ 15-20% –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç Brotli

### 2. **–ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ Django**
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –≤ Django, –¥–∞–∂–µ –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ú–æ–∂–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å HTML –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ proxy_cache –≤ Nginx

### 3. **–ë–æ–ª—å—à–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ WebP
- –ù–µ—Ç lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∏–∂–µ fold

### 4. **N+1 –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î**
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ select_related/prefetch_related

### 5. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –±–µ–∑ preload**
- CSS/JS –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å preload –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. **Brotli —Å–∂–∞—Ç–∏–µ –≤ Nginx**

**–§–∞–π–ª:** `nginx/nginx-prod.conf`

```nginx
# –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ gzip –Ω–∞—Å—Ç—Ä–æ–µ–∫
brotli on;
brotli_comp_level 6;
brotli_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ 15-20%

---

### 2. **Proxy Cache –¥–ª—è HTML –æ—Ç–≤–µ—Ç–æ–≤**

**–§–∞–π–ª:** `nginx/nginx-prod.conf`

```nginx
# –í –Ω–∞—á–∞–ª–µ http –±–ª–æ–∫–∞
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=backend_cache:10m max_size=1g inactive=60m use_temp_path=off;

# –í location / –±–ª–æ–∫–∞—Ö
proxy_cache backend_cache;
proxy_cache_valid 200 10m;
proxy_cache_valid 404 1m;
proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;
proxy_cache_background_update on;
add_header X-Cache-Status $upstream_cache_status;
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ 10 –º–∏–Ω—É—Ç, —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Django

---

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**

**–í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å django-imagekit –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏**

**–í–∞—Ä–∏–∞–Ω—Ç B: –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ WebP**

**–í–∞—Ä–∏–∞–Ω—Ç C: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CDN (Cloudflare, Cloudinary)**

**–≠—Ñ—Ñ–µ–∫—Ç:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ 25-35%

---

### 4. **Lazy Loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**

**–§–∞–π–ª:** `quiz_backend/blog/templates/blog/base.html`

```html
<img src="..." loading="lazy" decoding="async">
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

---

### 5. **Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤**

**–§–∞–π–ª:** `quiz_backend/blog/templates/blog/base.html`

```html
<link rel="preload" href="{% static 'blog/css/main.css' %}" as="style">
<link rel="preload" href="{% static 'blog/js/main.js' %}" as="script">
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –†–∞–Ω–Ω–µ–µ –Ω–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

### 6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î**

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- `select_related()` –¥–ª—è ForeignKey
- `prefetch_related()` –¥–ª—è ManyToMany –∏ reverse ForeignKey
- `only()` / `defer()` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–ª–µ–π

**–≠—Ñ—Ñ–µ–∫—Ç:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

---

### 7. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ Django**

**–§–∞–π–ª:** `quiz_backend/blog/views.py`

```python
from django.views.decorators.cache import cache_page

@cache_page(60 * 15)  # 15 –º–∏–Ω—É—Ç
def my_view(request):
    ...
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ Django

---

### 8. **HTTP/2 Server Push**

**–§–∞–π–ª:** `nginx/nginx-prod.conf`

```nginx
http2_push_preload on;
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

### 9. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Gunicorn**

**–§–∞–π–ª:** `docker-compose.local-prod.yml`

```yaml
environment:
  - GUNICORN_WORKERS=2  # –£–≤–µ–ª–∏—á–∏—Ç—å —Å 1 –¥–æ 2
  - GUNICORN_THREADS=4   # –£–≤–µ–ª–∏—á–∏—Ç—å —Å 2 –¥–æ 4
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –õ—É—á—à–∞—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

---

### 10. **CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏**

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudflare –∏–ª–∏ –¥—Ä—É–≥–æ–π CDN –¥–ª—è:
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- –ú–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–±—ã—Å—Ç—Ä—ã–π —ç—Ñ—Ñ–µ–∫—Ç):
1. ‚úÖ Brotli —Å–∂–∞—Ç–∏–µ
2. ‚úÖ Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. ‚úÖ Preload –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
4. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Gunicorn workers

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. Proxy Cache –¥–ª—è HTML
6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
7. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ Django

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏):
8. CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
9. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP
10. HTTP/2 Server Push

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
- **PageSpeed Score:** 85-95 (—Å–µ–π—á–∞—Å ~70-80)
- **First Contentful Paint:** < 1.5s (—Å–µ–π—á–∞—Å ~2-3s)
- **Time to Interactive:** < 3s (—Å–µ–π—á–∞—Å ~4-5s)
- **–†–∞–∑–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** -30-40%
- **–ó–∞–ø—Ä–æ—Å—ã –∫ –ë–î:** -50-70%

