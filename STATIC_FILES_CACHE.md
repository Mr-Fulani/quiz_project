# üé® –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤—ã –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ **—Å—Ç–∏–ª–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ –∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è**. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `git pull` –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É.

### –ü—Ä–∏—á–∏–Ω—ã:

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Nginx** - –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (`expires 30d`)
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –±—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤** - —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∏–º–µ–Ω–∞, –ø–æ—ç—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ ManifestStaticFilesStorage

–í `quiz_backend/config/settings.py` –∏–∑–º–µ–Ω–µ–Ω–æ:

```python
# –ë—ã–ª–æ:
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'

# –°—Ç–∞–ª–æ:
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.ManifestStaticFilesStorage'
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- Django –¥–æ–±–∞–≤–ª—è–µ—Ç —Ö–µ—à –∫ –∏–º–µ–Ω–∞–º —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `style.css` ‚Üí `style.abc123.css`)
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ –º–µ–Ω—è–µ—Ç—Å—è –µ–≥–æ —Ö–µ—à, –ø–æ—ç—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
- –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –¥–æ–ª–≥–∏–π —Å—Ä–æ–∫

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Nginx

–í `nginx/nginx-prod.conf` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```nginx
location /static/ {
    alias /app/staticfiles/;
    
    # –§–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏ (–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ) –∫—ç—à–∏—Ä—É–µ–º –Ω–∞ –≥–æ–¥
    location ~ \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
        access_log off;
    }
    
    # –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É–µ–º –Ω–∞ 1 –¥–µ–Ω—å
    expires 1d;
    add_header Cache-Control "public, must-revalidate";
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å —Ö–µ—à–∞–º–∏) –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 –≥–æ–¥ - —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç.–∫. –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–µ–Ω—è–µ—Ç—Å—è –∏–º—è —Ñ–∞–π–ª–∞
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 1 –¥–µ–Ω—å —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏
- –°–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∞–π—Ç–∞

---

## üöÄ –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ (git pull):

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞:**
   ```bash
   ./clear_cache.sh
   ```
   
   –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
   - –û—á–∏—â–∞–µ—Ç –ø–∞–ø–∫—É `staticfiles/` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
   - –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã —Å –Ω–æ–≤—ã–º–∏ —Ö–µ—à–∞–º–∏
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç Nginx

2. **–û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - **Windows/Linux:** `Ctrl + Shift + R`
   - **macOS:** `Cmd + Shift + R`

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞):

```bash
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
docker compose -f docker-compose.local-prod.yml down
docker compose -f docker-compose.local-prod.yml up -d --build

# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker compose down
docker compose up -d --build
```

---

## üîß –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å–æ —Å—Ç–∞—Ç–∏–∫–æ–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å—Ç–∞—Ç–∏–∫–∞ —Å–æ–±—Ä–∞–ª–∞—Å—å:

```bash
# –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
docker compose -f docker-compose.local-prod.yml exec quiz_backend ls -la staticfiles/

# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker compose exec quiz_backend ls -la staticfiles/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤:

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –≤ `staticfiles/`. –û–Ω–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–µ—à:
```
admin/css/base.abc123def456.css
admin/js/vendor.789xyz012.js
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí –≤–∫–ª–∞–¥–∫–∞ Network ‚Üí –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ CSS —Ñ–∞–π–ª ‚Üí –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ Headers:

```
Cache-Control: public, immutable
Expires: (–¥–∞—Ç–∞ —á–µ—Ä–µ–∑ –≥–æ–¥)
```

### –ï—Å–ª–∏ —Å—Ç–∏–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
3. –í–∫–ª—é—á–∏—Ç–µ **"Disable cache"**
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å **Ctrl+Shift+R** (–∏–ª–∏ **Cmd+Shift+R**)

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (DEBUG=True):

- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- Django –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (DEBUG=False):

- **–í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ `./clear_cache.sh` –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
- Nginx –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –Ω–∞–ø—Ä—è–º—É—é –∏–∑ `staticfiles/`
- Gunicorn –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞–∑–¥–∞—á–µ —Å—Ç–∞—Ç–∏–∫–∏

---

## üÜò –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å—Ç–∞—Ç–∏–∫–∏"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
docker compose -f docker-compose.local-prod.yml exec quiz_backend python manage.py collectstatic --noinput --clear -v 2
```

–§–ª–∞–≥ `-v 2` –ø–æ–∫–∞–∂–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏.

### –ü—Ä–æ–±–ª–µ–º–∞: "–°—Ç–∞—Ç–∏–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (404)"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –°–æ–±—Ä–∞–Ω—ã –ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã: `docker compose exec quiz_backend ls staticfiles/`
2. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: `docker compose exec quiz_backend ls -la staticfiles/`
3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx: `docker compose exec nginx cat /etc/nginx/nginx.conf`

### –ü—Ä–æ–±–ª–µ–º–∞: "–°—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ –≤—Å–µ –µ—â–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è"

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./clear_cache.sh`
2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–∞–Ω–∏—Ñ–µ—Å—Ç –æ–±–Ω–æ–≤–∏–ª—Å—è: `docker compose exec quiz_backend cat staticfiles/staticfiles.json`

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Django Static Files](https://docs.djangoproject.com/en/stable/howto/static-files/)
- [ManifestStaticFilesStorage](https://docs.djangoproject.com/en/stable/ref/contrib/staticfiles/#manifeststaticfilesstorage)
- [Nginx Caching](https://nginx.org/en/docs/http/ngx_http_headers_module.html#expires)
- [HTTP Caching Best Practices](https://developer.mozilla.org/en-US/docs/Web/HTTP/Caching)

