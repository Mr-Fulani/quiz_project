#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
echo "üßπ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)..."

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ quiz_backend
echo "üìÅ –û—á–∏—Å—Ç–∫–∞ staticfiles –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ..."
docker compose exec -T quiz_backend rm -rf staticfiles/*

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
echo "üì¶ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤..."
docker compose exec -T quiz_backend python manage.py collectstatic --noinput --clear

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx –¥–ª—è —Å–±—Ä–æ—Å–∞ –µ–≥–æ –∫—ç—à–∞
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx..."
docker compose restart nginx

echo ""
echo "‚úÖ –ö—ç—à –æ—á–∏—â–µ–Ω! –¢–µ–ø–µ—Ä—å –Ω–∞–∂–º–∏—Ç–µ Ctrl+Shift+R (–∏–ª–∏ Cmd+Shift+R –Ω–∞ Mac) –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∂–µ—Å—Ç–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏."
echo ""
echo "üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í —Ä–µ–∂–∏–º–µ DEBUG=True —Å—Ç–∞—Ç–∏–∫–∞ –æ—Ç–¥–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é Django,"
echo "   –ø–æ—ç—Ç–æ–º—É –æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞. –ù–æ –µ—Å–ª–∏ —Å—Ç–∏–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è,"
echo "   –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç."

