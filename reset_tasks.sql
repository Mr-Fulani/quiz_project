-- ============================================
-- Скрипт для удаления всех задач и сброса ID
-- ============================================
-- ВНИМАНИЕ: Это удалит ВСЕ задачи из базы данных!
-- Связанные данные (переводы, статистика, опросы) удалятся автоматически (CASCADE)

-- 1. Удаляем все задачи (CASCADE удалит связанные записи)
DELETE FROM tasks;

-- 2. Сбрасываем счетчик ID для таблицы tasks
-- PostgreSQL использует последовательности для AUTO_INCREMENT полей
ALTER SEQUENCE tasks_id_seq RESTART WITH 1;

-- 3. Также сбрасываем счетчики для связанных таблиц (опционально)
-- Если хотите также сбросить ID переводов, статистики и опросов:

-- Сброс счетчика для переводов задач
ALTER SEQUENCE task_translations_id_seq RESTART WITH 1;

-- Сброс счетчика для статистики задач
ALTER SEQUENCE task_statistics_id_seq RESTART WITH 1;

-- Сброс счетчика для опросов задач
ALTER SEQUENCE task_polls_id_seq RESTART WITH 1;

-- Проверка: следующий ID будет 1
-- SELECT nextval('tasks_id_seq'); -- должно вернуть 1

