# Настройки Telegram бота

## Проблема

При каждом деплое (коммит и push на сервер) настройки Telegram бота сбрасывались:
- Заголовок мини-приложения
- Описание бота
- Краткое описание бота
- Картинка приложения

## Решение

Теперь настройки бота обновляются только если установлены соответствующие переменные окружения. Если переменные не установлены, используются существующие настройки из BotFather, что предотвращает их сброс при каждом деплое.

## Переменные окружения

Добавьте следующие переменные в ваш `.env` файл (опционально):

```bash
# Описание бота (полное описание, отображается в профиле бота)
TELEGRAM_BOT_DESCRIPTION=Ваше описание бота здесь

# Краткое описание бота (отображается в списке чатов)
TELEGRAM_BOT_SHORT_DESCRIPTION=Краткое описание

# Текст кнопки меню Mini App (по умолчанию: "Запустить приложение")
TELEGRAM_MENU_BUTTON_TEXT=Запустить приложение
```

## Как использовать

### Вариант 1: Установить настройки через BotFather (рекомендуется)

1. Откройте [@BotFather](https://t.me/botfather) в Telegram
2. Используйте команды:
   - `/setdescription` - установить описание бота
   - `/setabouttext` - установить краткое описание
   - `/setuserpic` - установить картинку бота
   - `/setname` - установить имя бота

3. **Не устанавливайте** переменные `TELEGRAM_BOT_DESCRIPTION` и `TELEGRAM_BOT_SHORT_DESCRIPTION` в `.env`
4. При деплое настройки не будут перезаписываться

### Вариант 2: Управление через переменные окружения

1. Установите нужные значения в `.env` файл:
   ```bash
   TELEGRAM_BOT_DESCRIPTION=Ваше описание бота
   TELEGRAM_BOT_SHORT_DESCRIPTION=Краткое описание
   TELEGRAM_MENU_BUTTON_TEXT=Запустить приложение
   ```

2. При каждом деплое настройки будут автоматически обновляться из переменных окружения

## Важные замечания

- **Картинка бота** и **имя бота** устанавливаются только через BotFather и не могут быть изменены через Bot API
- **Заголовок Mini App** настраивается через BotFather при создании Mini App
- Если переменные окружения не установлены, код не будет перезаписывать существующие настройки
- Это позволяет сохранить пользовательские настройки, установленные через BotFather
- **Кнопка меню** по умолчанию открывает главную страницу Mini App (`/`), а не страницу профиля
- Текст кнопки меню по умолчанию: "Запустить приложение"

## Проверка настроек

После деплоя проверьте логи бота:
```bash
docker compose -f docker-compose.local-prod.yml logs telegram_bot
```

Вы должны увидеть сообщения:
- `ℹ️  TELEGRAM_BOT_DESCRIPTION не установлена - используем существующие настройки` (если переменная не установлена)
- `✅ Описание бота обновлено` (если переменная установлена и настройки обновлены)

