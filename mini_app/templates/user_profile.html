{% extends "base.html" %}

{% block title %}
{{ translations.get('viewing_profile', '–ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è') }}
{% endblock %}

{% block extra_css %}
<!-- Swiper CSS –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
<link rel="stylesheet" href="{{ user_profile_css_url }}">
{% endblock %}

{% block content %}
<div id="user-profile-loader" class="loader-container">
    <div class="loader-text" data-translate="loading">{{ translations.get('loading', '–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è...') }}</div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è -->
<div id="private-profile-container" class="private-profile-container">
    <div class="private-profile-content">
        <div class="profile-header">
            <div class="profile-avatar-container">
                <img id="private-avatar" class="profile-avatar" src="/static/images/default_avatar.png" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <h1 id="private-name" class="profile-name">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
            <p id="private-username" class="profile-username">@username</p>
        </div>
        
        <div class="profile-hidden-notice">
            <div class="hidden-icon">üîí</div>
            <h2 class="hidden-title" data-translate="profile_hidden">{{ translations.get('profile_hidden', '–ü—Ä–æ—Ñ–∏–ª—å —Å–∫—Ä—ã—Ç') }}</h2>
            <p class="hidden-message" data-translate="profile_hidden_message">{{ translations.get('profile_hidden_message', '–≠—Ç–æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫—Ä—ã–ª —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å') }}</p>
        </div>
        
        <div class="profile-actions">
            <button id="back-to-top-users-btn" class="action-btn back-btn">
                <span data-translate="back_button">{{ translations.get('back_button', '–ù–∞–∑–∞–¥') }}</span>
                <i class="fas fa-arrow-left action-btn-icon"></i>
            </button>
        </div>
    </div>
</div>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è -->
<div id="public-profile-container" class="profile-container">
    <div class="profile-header">
        <div class="profile-avatar-container">
            <img id="profile-avatar" class="profile-avatar" src="/static/images/default_avatar.png" alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            <div id="profile-online-indicator" class="online-indicator" style="display: none;"></div>
        </div>
        <h1 id="profile-name" class="profile-name">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        <p id="profile-username" class="profile-username">@username</p>
        <p id="profile-online-status" class="online-status-text"></p>
    </div>

    <!-- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div class="professional-section">
        <h2 class="progress-title" data-translate="professional_info">{{ translations.get('professional_info', '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è') }}</h2>
        <div class="professional-info">
            <div class="info-item">
                <span class="info-label" data-translate="gender">{{ translations.get('gender', '–ü–æ–ª') }}:</span>
                <span id="profile-gender" class="info-value" data-translate="not_specified">{{ translations.get('not_specified', '–ù–µ —É–∫–∞–∑–∞–Ω') }}</span>
            </div>
            <div class="info-item">
                <span class="info-label" data-translate="birth_date">{{ translations.get('birth_date', '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è') }}:</span>
                <span id="profile-birth-date" class="info-value" data-translate="not_specified">{{ translations.get('not_specified', '–ù–µ —É–∫–∞–∑–∞–Ω–∞') }}</span>
            </div>
            <div class="info-item">
                <span class="info-label" data-translate="grade">{{ translations.get('grade', '–ì—Ä–µ–π–¥') }}:</span>
                <span id="profile-grade" class="info-value" data-translate="not_specified">{{ translations.get('not_specified', '–ù–µ —É–∫–∞–∑–∞–Ω') }}</span>
            </div>
            <div class="info-item">
                <span class="info-label" data-translate="technologies">{{ translations.get('technologies', '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏') }}:</span>
                <div id="profile-technologies" class="info-value technologies-list">
                    <span class="no-data" data-translate="no_technologies">{{ translations.get('no_technologies', '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã') }}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="stats-section">
        <h2 class="progress-title" data-translate="statistics">{{ translations.get('statistics_title', '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') }}</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-number" id="profile-total-quizzes">0</div>
                <div class="stat-label" data-translate="total_questions">{{ translations.get('total_questions', '–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤') }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-number" id="profile-correct-answers">0</div>
                <div class="stat-label" data-translate="correct_answers">{{ translations.get('correct_answers', '–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚ùå</div>
                <div class="stat-number" id="profile-incorrect-answers">0</div>
                <div class="stat-label" data-translate="incorrect_answers">{{ translations.get('incorrect_answers', '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-number" id="profile-success-rate">0%</div>
                <div class="stat-label" data-translate="accuracy">{{ translations.get('accuracy', '–¢–æ—á–Ω–æ—Å—Ç—å') }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üî•</div>
                <div class="stat-number" id="profile-current-streak">0</div>
                <div class="stat-label" data-translate="streak">{{ translations.get('streak', '–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è') }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üèÜ</div>
                <div class="stat-number" id="profile-best-streak">0</div>
                <div class="stat-label" data-translate="best_streak">{{ translations.get('best_streak', '–õ—É—á—à–∞—è —Å–µ—Ä–∏—è') }}</div>
            </div>
        </div>
    </div>

    <!-- –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ -->
    <div class="social-section">
        <h2 class="progress-title" data-translate="social_networks">{{ translations.get('social_networks', '–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏') }}</h2>
        <div id="social-links-container">
            <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
            <p class="social-empty" data-translate="no_social_links">{{ translations.get('no_social_links', '–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã.') }}</p>
        </div>
    </div>

    <div class="profile-actions">
        <button id="write-message-btn" class="action-btn write-btn" style="display: none;">
            <span data-translate="write_message">{{ translations.get('write_message', '–ù–∞–ø–∏—Å–∞—Ç—å') }}</span>
            <i class="fas fa-paper-plane action-btn-icon"></i>
        </button>
        <button id="back-btn" class="action-btn back-btn">
            <span data-translate="back_button">{{ translations.get('back_button', '–ù–∞–∑–∞–¥') }}</span>
            <i class="fas fa-arrow-left action-btn-icon"></i>
        </button>
    </div>
</div>

<!-- Backdrop –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–∞–º–∏ -->
<div class="avatar-modal-backdrop" id="avatar-modal-backdrop"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≥–∞–ª–µ—Ä–µ–µ–π –∞–≤–∞—Ç–∞—Ä–æ–∫ -->
<div class="avatar-modal" id="avatar-modal">
    <button class="avatar-modal-close" id="avatar-modal-close">&times;</button>
    <div class="swiper" id="avatar-swiper">
        <div class="swiper-wrapper" id="avatar-swiper-wrapper">
            <!-- Slides –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript -->
        </div>
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <!-- Pagination -->
        <div class="swiper-pagination"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<!-- Swiper JS –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    // –ü–µ—Ä–µ–¥–∞–µ–º telegram_id –≤ JavaScript
    window.USER_TELEGRAM_ID = {{ telegram_id|default('null') }};
</script>
<script src="{{ get_js_url('user_profile.js') }}"></script>
{% endblock %}

