{% extends "base.html" %}

{% block title %}
{{ translations.get('statistics_title', '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') }}
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ statistics_css_url }}">
{% endblock %}

{% block content %}
<div class="statistics-container">
    <h1 data-translate="statistics_title">{{ translations.get('statistics_title', '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') }}</h1>
    
    {% if user_statistics and user_statistics.stats %}
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-number">{{ user_statistics.stats.total_quizzes or 0 }}</div>
            <div class="stat-label" data-translate="total_questions">{{ translations.get('total_questions', '–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-number">{{ user_statistics.stats.completed_quizzes or 0 }}</div>
            <div class="stat-label" data-translate="correct_answers">{{ translations.get('correct_answers', '–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚ùå</div>
            <div class="stat-number">{{ user_statistics.stats.failed_quizzes or 0 }}</div>
            <div class="stat-label" data-translate="incorrect_answers">{{ translations.get('incorrect_answers', '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-number">{{ user_statistics.stats.success_rate or 0 }}%</div>
            <div class="stat-label" data-translate="accuracy">{{ translations.get('accuracy', '–¢–æ—á–Ω–æ—Å—Ç—å') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üî•</div>
            <div class="stat-number">{{ user_statistics.stats.current_streak or 0 }}</div>
            <div class="stat-label" data-translate="streak">{{ translations.get('streak', '–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üèÜ</div>
            <div class="stat-number">{{ user_statistics.stats.best_streak or 0 }}</div>
            <div class="stat-label" data-translate="best_streak">{{ translations.get('best_streak', '–õ—É—á—à–∞—è —Å–µ—Ä–∏—è') }}</div>
        </div>
    </div>
    
    {% if user_statistics.topic_progress and user_statistics.topic_progress|length > 0 %}
    <div class="chart-container">
        <h2 data-translate="topic_progress">{{ translations.get('topic_progress', '–ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ç–µ–º–∞–º') }}</h2>
        <div class="topic-progress-list">
            {% for topic in user_statistics.topic_progress %}
            <div class="topic-progress-item">
                <div class="topic-name">{{ topic.name }}</div>
                <div class="topic-stats">
                    <span class="topic-completed">{{ topic.completed }}</span>
                    <span class="topic-separator">/</span>
                    <span class="topic-total">{{ topic.total }}</span>
                    <span class="topic-percentage">({{ topic.percentage }}%)</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: {{ topic.percentage }}%"></div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}
    
    
    {% else %}
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üìä</div>
            <div class="stat-number">0</div>
            <div class="stat-label" data-translate="total_questions">{{ translations.get('total_questions', '–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚úÖ</div>
            <div class="stat-number">0</div>
            <div class="stat-label" data-translate="correct_answers">{{ translations.get('correct_answers', '–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚ùå</div>
            <div class="stat-number">0</div>
            <div class="stat-label" data-translate="incorrect_answers">{{ translations.get('incorrect_answers', '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üéØ</div>
            <div class="stat-number">0%</div>
            <div class="stat-label" data-translate="accuracy">{{ translations.get('accuracy', '–¢–æ—á–Ω–æ—Å—Ç—å') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üî•</div>
            <div class="stat-number">0</div>
            <div class="stat-label" data-translate="streak">{{ translations.get('streak', '–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è') }}</div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üèÜ</div>
            <div class="stat-number">0</div>
            <div class="stat-label" data-translate="best_streak">{{ translations.get('best_streak', '–õ—É—á—à–∞—è —Å–µ—Ä–∏—è') }}</div>
        </div>
    </div>
    
    <div class="chart-container">
        <h2 data-translate="statistics_title">{{ translations.get('statistics_title', '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞') }}</h2>
        <div class="chart-placeholder">
            <p data-translate="no_statistics_data">{{ translations.get('no_statistics_data', '–ü–æ–∫–∞ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è') }}</p>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ statistics_js_url }}"></script>
{% endblock %}