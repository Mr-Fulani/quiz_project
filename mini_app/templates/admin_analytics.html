{% extends "base.html" %}

{% block title %}
{{ translations.get('admin_analytics_title', '–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å') }}
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ get_css_url('admin_analytics.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ get_js_url('admin_analytics.js') }}"></script>
{% endblock %}

{% block content %}
<div class="admin-analytics-container">
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="analytics-header">
        <h1 data-translate="admin_analytics_title">{{ translations.get('admin_analytics_title', '–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å') }}</h1>
        <p class="analytics-subtitle" data-translate="admin_analytics_subtitle">
            {{ translations.get('admin_analytics_subtitle', '–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è') }}
        </p>
    </div>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-indicator" id="loading-indicator">
        <div class="loading-spinner"></div>
        <p data-translate="loading">{{ translations.get('loading', '–ó–∞–≥—Ä—É–∑–∫–∞...') }}</p>
    </div>
    
    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –¥–æ—Å—Ç—É–ø–∞ -->
    <div class="access-denied" id="access-denied" style="display: none;">
        <div class="error-icon">üîí</div>
        <h2 data-translate="access_denied_title">{{ translations.get('access_denied_title', '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω') }}</h2>
        <p data-translate="access_denied_message">
            {{ translations.get('access_denied_message', '–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º') }}
        </p>
        <button class="back-button" onclick="window.history.back()">
            <span data-translate="back">{{ translations.get('back', '–ù–∞–∑–∞–¥') }}</span>
        </button>
    </div>
    
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
    <div class="analytics-content" id="analytics-content" style="display: none;">
        
        <!-- –î–æ–Ω–∞—Ç—ã -->
        <div class="analytics-section">
            <h2 data-translate="donations_title">{{ translations.get('donations_title', 'üí∞ –î–æ–Ω–∞—Ç—ã') }}</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-donations">-</div>
                    <div class="stat-label" data-translate="total_donations">
                        {{ translations.get('total_donations', '–í—Å–µ–≥–æ –¥–æ–Ω–∞—Ç–æ–≤') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-amount">$-</div>
                    <div class="stat-label" data-translate="total_amount">
                        {{ translations.get('total_amount', '–û–±—â–∞—è —Å—É–º–º–∞') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthly-donations">-</div>
                    <div class="stat-label" data-translate="monthly_donations">
                        {{ translations.get('monthly_donations', '–ó–∞ –º–µ—Å—è—Ü') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthly-amount">$-</div>
                    <div class="stat-label" data-translate="monthly_amount">
                        {{ translations.get('monthly_amount', '–°—É–º–º–∞ –∑–∞ –º–µ—Å—è—Ü') }}
                    </div>
                </div>
            </div>
            
            <!-- –†–∞–∑–±–∏–≤–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º -->
            <div class="source-breakdown">
                <h3 data-translate="by_source">{{ translations.get('by_source', '–ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º') }}</h3>
                <div class="source-stats" id="source-stats">
                    <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>
        
        <!-- –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ -->
        <div class="analytics-section">
            <h2 data-translate="subscriptions_title">{{ translations.get('subscriptions_title', 'üë• –ü–æ–¥–ø–∏—Å—á–∏–∫–∏') }}</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-users">-</div>
                    <div class="stat-label" data-translate="total_users">
                        {{ translations.get('total_users', '–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="monthly-users">-</div>
                    <div class="stat-label" data-translate="monthly_new_users">
                        {{ translations.get('monthly_new_users', '–ù–æ–≤—ã—Ö –∑–∞ –º–µ—Å—è—Ü') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="weekly-users">-</div>
                    <div class="stat-label" data-translate="weekly_new_users">
                        {{ translations.get('weekly_new_users', '–ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é') }}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å -->
        <div class="analytics-section">
            <h2 data-translate="activity_title">{{ translations.get('activity_title', 'üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å') }}</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="active-7-days">-</div>
                    <div class="stat-label" data-translate="active_7_days">
                        {{ translations.get('active_7_days', '–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ 7 –¥–Ω–µ–π') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="active-30-days">-</div>
                    <div class="stat-label" data-translate="active_30_days">
                        {{ translations.get('active_30_days', '–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞ 30 –¥–Ω–µ–π') }}
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="online-now">-</div>
                    <div class="stat-label" data-translate="online_now">
                        {{ translations.get('online_now', '–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å') }}
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
        <div class="last-updated">
            <span data-translate="last_updated">{{ translations.get('last_updated', '–û–±–Ω–æ–≤–ª–µ–Ω–æ:') }}</span>
            <span id="last-updated-time">-</span>
        </div>
        
    </div>
</div>
{% endblock %}

