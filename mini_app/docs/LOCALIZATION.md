# –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ Quiz Mini App

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –û–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

1. **LocalizationService** (`services/localization.py`)
   - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
   - –°–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–≤–∞—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è–∑—ã–∫–∞–º–∏

2. **LanguageMiddleware** (`middleware/language_middleware.py`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞:
     1. Query –ø–∞—Ä–∞–º–µ—Ç—Ä `lang`
     2. –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Accept-Language`
     3. Cookie `selected_language`
     4. –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

3. **API Endpoint** (`routers/api.py`)
   - `/api/change-language` - –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

1. **LocalizationService** (`static/js/localization.js`)
   - JavaScript —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

- `en` - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `ru` - –†—É—Å—Å–∫–∏–π

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í —à–∞–±–ª–æ–Ω–∞—Ö (Jinja2)

```html
<!-- –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥ -->
<h1>{{ translations.get('home', '–ì–ª–∞–≤–Ω–∞—è') }}</h1>

<!-- –° data-–∞—Ç—Ä–∏–±—É—Ç–æ–º –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è -->
<span data-translate="home">{{ translations.get('home', '–ì–ª–∞–≤–Ω–∞—è') }}</span>

<!-- Placeholder -->
<input data-translate-placeholder="search_placeholder" placeholder="{{ translations.get('search_placeholder', '–ü–æ–∏—Å–∫...') }}">

<!-- Title –∞—Ç—Ä–∏–±—É—Ç -->
<button data-translate-title="help" title="{{ translations.get('help', '–ü–æ–º–æ—â—å') }}">

<!-- Alt –∞—Ç—Ä–∏–±—É—Ç -->
<img data-translate-alt="logo" alt="{{ translations.get('logo', '–õ–æ–≥–æ—Ç–∏–ø') }}">
```

### –í JavaScript

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–∞
const text = window.localizationService.getText('home');

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
await window.localizationService.changeLanguage('ru');

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —è–∑—ã–∫–∞
const currentLang = window.localizationService.getCurrentLanguage();

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
const translations = window.localizationService.getAllTranslations();
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤

1. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–∏ –≤ `services/localization.py`:

```python
TRANSLATIONS = {
    "en": {
        "new_key": "English text",
        # ...
    },
    "ru": {
        "new_key": "–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç",
        # ...
    }
}
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö:

```html
<span data-translate="new_key">{{ translations.get('new_key', 'Fallback') }}</span>
```

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ data-–∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```html
<!-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ -->
<span data-translate="welcome_message">{{ translations.get('welcome_message', '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å') }}</span>

<!-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ -->
<span>{{ translations.get('welcome_message', '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å') }}</span>
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è

```html
<!-- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ -->
<span data-translate="welcome_message">{{ translations.get('welcome_message', '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å') }}</span>

<!-- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ -->
<span data-translate="welcome_message">{{ translations.get('welcome_message') }}</span>
```

### 3. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

```python
TRANSLATIONS = {
    "en": {
        # –ù–∞–≤–∏–≥–∞—Ü–∏—è
        "home": "Home",
        "profile": "Profile",
        
        # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
        "search_placeholder": "Search...",
        "start_button": "Start",
        
        # –ü—Ä–æ—Ñ–∏–ª—å
        "edit_profile": "Edit Profile",
        "save_changes": "Save Changes",
    }
}
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏

```python
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
"search_placeholder": "Search topics..."
"start_quiz_button": "Start Quiz"
"profile_edit_button": "Edit Profile"

# ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
"search": "Search topics..."
"start": "Start Quiz"
"edit": "Edit Profile"
```

## API Endpoints

### POST /api/change-language

–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —è–∑—ã–∫ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã.

**Request:**
```json
{
    "language": "ru"
}
```

**Response:**
```json
{
    "success": true,
    "language": "ru",
    "translations": {
        "home": "–ì–ª–∞–≤–Ω–∞—è",
        "profile": "–ü—Ä–æ—Ñ–∏–ª—å",
        // ...
    },
    "supported_languages": ["en", "ru"]
}
```

## –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –≤–µ–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:

```javascript
// –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å
console.log('üåê LocalizationService initialized with language:', language);
console.log('üîÑ Changing language to:', language);
console.log('‚úÖ Language changed successfully');
console.log('üé® Updating interface with new translations');
```

```python
# –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å
logger.debug(f"Language detected: {language} for {request.url.path}")
logger.info(f"Rendering page with language: {language}")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ —è–∑—ã–∫ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–∏–ª—Å—è

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞

1. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ —è–∑—ã–∫–∞ –≤ `core/config.py`:
```python
SUPPORTED_LANGUAGES: list = ["en", "ru", "es"]
```

2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤ `services/localization.py`:
```python
TRANSLATIONS = {
    "en": { ... },
    "ru": { ... },
    "es": {
        "home": "Inicio",
        "profile": "Perfil",
        # ...
    }
}
```

3. –û–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ —è–∑—ã–∫–∞:
```html
{% if lang == 'es' %}üá™üá∏ Espa√±ol{% endif %}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

1. –†–∞—Å—à–∏—Ä—å—Ç–µ `updateInterface()` –≤ `localization.js`:
```javascript
// –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
document.querySelectorAll('[data-translate-custom]').forEach(element => {
    const key = element.getAttribute('data-translate-custom');
    const translation = this.getText(key);
    if (translation) {
        element.setAttribute('data-custom', translation);
    }
});
```

2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ —à–∞–±–ª–æ–Ω–∞—Ö:
```html
<div data-translate-custom="custom_attribute" data-custom="{{ translations.get('custom_attribute', 'Default') }}">
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ middleware
2. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞ —á–µ—Ä–µ–∑ API
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —è–∑—ã–∫–∞ –≤ localStorage

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —è–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ Telegram Web App

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤** - –ø–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –ø–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è DOM-–æ–ø–µ—Ä–∞—Ü–∏–π** - –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–ª–µ–¥–∏—Ç–µ –∑–∞:
- –í—Ä–µ–º–µ–Ω–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –†–∞–∑–º–µ—Ä–æ–º —Å–ª–æ–≤–∞—Ä–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ–º DOM-–æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞ 