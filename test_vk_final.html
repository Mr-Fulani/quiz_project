<!DOCTYPE html>
<html>
<head>
    <title>Test VK Share - Final</title>
</head>
<body>
    <h1>Test VK Share - Final</h1>
    
    <button onclick="testVK()">Test VK Share</button>
    
    <div id="result"></div>
    
    <script>
        function testVK() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>Testing VK share...</p>';
            
            // Используем production URL
            const url = 'https://quiz-code.com/ru/post/krutoj-promt-dlya-gpt/';
            const title = 'Крутой промт для GPT';
            
            console.log('Original URL:', url);
            
            // Создаем share URL (без языкового префикса для VK)
            const shareUrl = url.replace('/ru/', '/');
            console.log('Share URL:', shareUrl);
            
            // Создаем финальный VK share URL
            const vkUrl = `https://vk.com/share.php?url=${encodeURIComponent(shareUrl)}&title=${encodeURIComponent(title)}`;
            console.log('Final VK URL:', vkUrl);
            
            resultDiv.innerHTML += `<p>VK URL: <a href="${vkUrl}" target="_blank">${vkUrl}</a></p>`;
            
            // Открываем окно
            window.open(vkUrl, '_blank', 'width=600,height=400');
        }
    </script>
</body>
</html> 