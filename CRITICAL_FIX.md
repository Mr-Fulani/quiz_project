# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï - RawPostDataException

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ 500: `RawPostDataException: You cannot access body after reading from request's data stream`

## –ü—Ä–∏—á–∏–Ω–∞
–í DRF (Django REST Framework) –∫–æ–≥–¥–∞ –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ `request.data`, —ç—Ç–æ —É–∂–µ —á–∏—Ç–∞–µ—Ç body stream. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ **–Ω–µ–ª—å–∑—è** –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ `request.body` –Ω–∞–ø—Ä—è–º—É—é.

–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ `request.data`:
```
Request data (DRF): {'id': 7662576714, 'first_name': 'Development', ...}
```

–ù–æ –∫–æ–¥ –ø—ã—Ç–∞–ª—Å—è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—á–∏—Ç–∞—Ç—å `request.body`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –æ—à–∏–±–∫—É.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏: —Å–Ω–∞—á–∞–ª–∞ `request.data`, –ø–æ—Ç–æ–º `request.POST`, –ø–æ—Ç–æ–º `_body`
2. ‚úÖ –£–±—Ä–∞–Ω–æ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `request.body` –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞
3. ‚úÖ –£–±—Ä–∞–Ω–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ `request.body` –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `request._body` –≤–º–µ—Å—Ç–æ `request.body` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /opt/quiz_project/quiz_project
git pull origin fix/telegram-auth-issue

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å quiz_backend
docker compose -f docker-compose.local-prod.yml up -d --build quiz_backend
```

## –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
1. –ñ–µ—Å—Ç–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `Ctrl + Shift + R`
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram
3. –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å! –î–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ `request.data`, –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –∏—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å

## –ü—Ä–æ–≤–µ—Ä–∫–∞
–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ request.data (DRF): {...}
–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: {...}
```

–ò –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–∫–∏ `RawPostDataException`.

