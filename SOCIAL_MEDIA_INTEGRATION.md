# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫—É–µ—Ç –∑–∞–¥–∞—á–∏ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ `published=True`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–≤–∞ –º–µ—Ç–æ–¥–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:

1. **–ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API** (Pinterest, –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω, Facebook) - –Ω–∞–¥–µ–∂–Ω–µ–µ –∏ –±—ã—Å—Ç—Ä–µ–µ
2. **Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (Instagram, TikTok, YouTube Shorts) - —á–µ—Ä–µ–∑ Make.com

> üìã **–í–∞–∂–Ω–æ:** –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OAuth –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —Å–º. –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: [SOCIAL_MEDIA_OAUTH_SCOPES.md](./SOCIAL_MEDIA_OAUTH_SCOPES.md)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞/–æ–±–Ω–æ–≤–ª–µ–Ω–∞ ‚Üí published=True
              ‚Üì
      Django Signal (auto_publish_to_social_media)
              ‚Üì
   social_media_service.publish_to_social_media()
              ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   API Platforms            ‚îÇ   Webhook Platforms          ‚îÇ
    ‚îÇ   (Pinterest, –î–∑–µ–Ω, FB)    ‚îÇ   (Instagram, TikTok, YT)    ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì                              ‚Üì
      –ü—Ä—è–º–æ–π API –∑–∞–ø—Ä–æ—Å              Make.com Webhook
              ‚Üì                              ‚Üì
     –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ë–î                Callback –≤ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –ø–ª–∞—Ç—Ñ–æ—Ä–º

### 1. Pinterest

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: https://developers.pinterest.com/apps/
2. –ü–æ–ª—É—á–∏—Ç–µ Access Token —Å –ø—Ä–∞–≤–∞–º–∏: `boards:read`, `pins:write`
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–æ—Å–∫—É (Board) –≤ Pinterest –∏ –ø–æ–ª—É—á–∏—Ç–µ –µ—ë ID
4. –í Django –∞–¥–º–∏–Ω–∫–µ ‚Üí **Webhooks ‚Üí Social Media Credentials** ‚Üí –î–æ–±–∞–≤–∏—Ç—å:
   - Platform: Pinterest
   - Access Token: –≤–∞—à —Ç–æ–∫–µ–Ω
   - Extra Data: `{"board_id": "your-board-id"}`
   - Is Active: ‚úÖ

### 2. –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π. –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **webhook** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Make.com –∏–ª–∏ Zapier.

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ Webhook:

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –≤ –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω:** https://zen.yandex.ru/
2. **–°–æ–∑–¥–∞–π—Ç–µ –∫–∞–Ω–∞–ª** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Make.com –∏–ª–∏ Zapier:**
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ [Make.com](https://www.make.com/) –∏–ª–∏ [Zapier](https://zapier.com/)
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (scenario/zap)
   - –î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä: **Webhook ‚Üí Custom webhook**
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ URL webhook (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –≤ Django)

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É–±–ª–∏–∫–∞—Ü–∏—é –≤ –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω:**
   - –í Make.com/Zapier –¥–æ–±–∞–≤—å—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–∫—Å—Ç, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å—Å—ã–ª–∫–∞)

5. **–í Django –∞–¥–º–∏–Ω–∫–µ ‚Üí Webhooks ‚Üí Webhook ‚Üí –î–æ–±–∞–≤–∏—Ç—å:**
   - **URL:** –≤—Å—Ç–∞–≤—å—Ç–µ URL webhook –∏–∑ Make.com/Zapier
   - **Service Name:** Make.com (–∏–ª–∏ Zapier)
   - **Webhook Type:** –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
   - **Target Platforms:** `["yandex_dzen"]` (–≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –º–∞—Å—Å–∏–≤–∞)
   - **Is Active:** ‚úÖ
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

6. **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ webhook:**
   ```json
   {
     "task_id": "57",
     "platform": "yandex_dzen",
     "image_url": "https://...",
     "question": "–í–æ–ø—Ä–æ—Å –∑–∞–¥–∞—á–∏",
     "answers": ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", ...],
     "correct_answer": "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç",
     "explanation": "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ",
     "external_link": "https://your-site.com/task/57",
     "language": "ru",
     "created_at": "2025-11-30T...",
     "published_at": "2025-11-30T..."
   }
   ```

7. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É —Å `published=True`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Django - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ webhook
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Make.com/Zapier - –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ –∑–∞–ø—Ä–æ—Å
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ø–Ω–¥–µ–∫—Å –î–∑–µ–Ω - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç–∞—Ç—å—è

### 3. Facebook

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –∫–æ–º–ø–∞–Ω–∏—é –≤ Facebook Business:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Facebook Business Manager**: https://business.facebook.com/
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç" –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏:
     - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
     - –í–∞—à–µ –∏–º—è –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å
     - Email –∫–æ–º–ø–∞–Ω–∏–∏
     - –ê–¥—Ä–µ—Å –∫–æ–º–ø–∞–Ω–∏–∏
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ email –∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ë–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞

2. **–°–æ–∑–¥–∞–π—Ç–µ Facebook —Å—Ç—Ä–∞–Ω–∏—Ü—É** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç):
   - –í Business Manager –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–°—Ç—Ä–∞–Ω–∏—Ü—ã"
   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** https://developers.facebook.com/apps/
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø "–î—Ä—É–≥–æ–µ" –∏–ª–∏ "–ë–∏–∑–Ω–µ—Å"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π email
   - –ü—Ä–∏–≤—è–∂–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (Business Manager)

4. **–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   - –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" ‚Üí "Graph API Explorer"**
   - –ò–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí **"–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ —Ñ—É–Ω–∫—Ü–∏–∏" (Permissions & Features)**
   - –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∞–≤–∞:
     - ‚úÖ `pages_manage_posts` - –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤
     - ‚úÖ `pages_read_engagement` - –¥–ª—è —á—Ç–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
     - ‚úÖ `pages_show_list` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
5. **–ü–æ–ª—É—á–∏—Ç–µ User Access Token:**
   - –í **Graph API Explorer**: https://developers.facebook.com/tools/explorer/
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ
   - –í —Ä–∞–∑–¥–µ–ª–µ "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" –≤—ã–±–µ—Ä–∏—Ç–µ:
     - `pages_manage_posts`
     - `pages_read_engagement`
     - `pages_show_list`
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞" (Generate Access Token)
   - –í–æ–π–¥–∏—Ç–µ –≤ Facebook –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (—ç—Ç–æ User Access Token)

6. **–ü–æ–ª—É—á–∏—Ç–µ Page Access Token:**
   - –í Graph API Explorer –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
     ```
     GET /me/accounts?access_token={USER_ACCESS_TOKEN}
     ```
   - –ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:
     ```
     https://graph.facebook.com/v18.0/me/accounts?access_token={USER_ACCESS_TOKEN}
     ```
   - –í –æ—Ç–≤–µ—Ç–µ –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ `access_token` (—ç—Ç–æ Page Access Token)
   - –¢–∞–∫–∂–µ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ `id` —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—ç—Ç–æ `page_id`)

7. **–ü–æ–ª—É—á–∏—Ç–µ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   - –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:
     ```
     GET /oauth/access_token?grant_type=fb_exchange_token&client_id={APP_ID}&client_secret={APP_SECRET}&fb_exchange_token={PAGE_ACCESS_TOKEN}
     ```
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: https://developers.facebook.com/tools/accesstoken/
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω (–¥–µ–π—Å—Ç–≤—É–µ—Ç ~60 –¥–Ω–µ–π)

8. **–í Django –∞–¥–º–∏–Ω–∫–µ ‚Üí Webhooks ‚Üí Social Media Credentials ‚Üí –î–æ–±–∞–≤–∏—Ç—å:**
   - Platform: Facebook
   - Access Token: –≤–∞—à Page Access Token (–∏–ª–∏ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω)
   - Extra Data: `{"page_id": "your-page-id"}` (ID —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ —à–∞–≥–∞ 5)
   - Is Active: ‚úÖ

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook –ø–ª–∞—Ç—Ñ–æ—Ä–º (Make.com)

### Instagram, TikTok, YouTube Shorts

–≠—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ç—Ä–µ–±—É—é—Ç —Å–ª–æ–∂–Ω–æ–π OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –æ–¥–æ–±—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Make.com:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ Make.com:**
   - Webhook Trigger ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç Django
   - Router ‚Üí —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
   - –ú–æ–¥—É–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
     - Instagram: "Create Media" (—Ç—Ä–µ–±—É–µ—Ç Business –∞–∫–∫–∞—É–Ω—Ç)
     - TikTok: TikTok –º–æ–¥—É–ª—å (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
     - YouTube: YouTube Shorts API

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –≤ Django:**
   - Django –∞–¥–º–∏–Ω–∫–∞ ‚Üí **Webhooks ‚Üí Webhooks** ‚Üí –î–æ–±–∞–≤–∏—Ç—å:
   - Service Name: "Make.com Social Media"
   - URL: –≤–∞—à Make.com webhook URL
   - Webhook Type: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏"
   - Target Platforms: `["instagram", "tiktok", "youtube_shorts"]`
   - Is Active: ‚úÖ

3. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–π—Ç–µ callback –≤ Make.com:**
   - –î–æ–±–∞–≤—å—Ç–µ HTTP –º–æ–¥—É–ª—å –≤ –∫–æ–Ω—Ü–µ —Å—Ü–µ–Ω–∞—Ä–∏—è
   - POST –≤: `https://your-domain.com/api/webhooks/social-media-callback/`
   - Body:
     ```json
     {
       "task_id": "{{task_id}}",
       "platform": "{{platform}}",
       "status": "published",
       "post_url": "{{post_url}}",
       "post_id": "{{post_id}}"
     }
     ```

---

## –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö webhook

Django –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Make.com —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```json
{
  "task_id": 123,
  "platform": "instagram",
  "content": {
    "image_url": "https://s3.amazonaws.com/.../task.png",
    "title": "Python Quiz: What will be the output?",
    "description": "Python Quiz...\n\n–í–∞—Ä–∏–∞–Ω—Ç—ã: Option A, Option B...",
    "explanation": "The correct answer is B because...",
    "link": "https://your-site.com/task/123",
    "hashtags": ["#programming", "#coding", "#quiz"],
    "topic": "Python",
    "difficulty": "medium"
  },
  "metadata": {
    "language": "en",
    "translation_group_id": "uuid-here",
    "publish_date": "2025-11-30T12:00:00Z"
  }
}
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —Å `published=True`, –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤–æ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏.

### –†—É—á–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ Django –∞–¥–º–∏–Ω–∫—É ‚Üí **Tasks ‚Üí Tasks**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á–∏ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
3. Actions ‚Üí **üì± –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —Å–æ—Ü—Å–µ—Ç–∏**
4. –ù–∞–∂–º–∏—Ç–µ **Go**

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—É–±–ª–∏–∫–∞—Ü–∏–π

1. Django –∞–¥–º–∏–Ω–∫–∞ ‚Üí **Tasks ‚Üí Social Media Posts** - –≤—Å–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
2. –ò–ª–∏ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Social Media Posts** (inline)

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç—É—Å—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–π

- **–û–∂–∏–¥–∞–µ—Ç** (pending) - —Å–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å, –æ–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è** (processing) - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ API/webhook
- **–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ** (published) - —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
- **–û—à–∏–±–∫–∞** (failed) - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### –õ–æ–≥–∏

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `quiz_backend_logs/debug.log`:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–π
docker compose exec quiz_backend tail -f /app/quiz_backend_logs/debug.log | grep "—Å–æ—Ü—Å–µ—Ç–∏"
```

---

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ—Ç credentials –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∞–¥–º–∏–Ω–∫–µ:
- Webhooks ‚Üí Social Media Credentials ‚Üí –î–æ–±–∞–≤–∏—Ç—å

### –ü—Ä–æ–±–ª–µ–º–∞: "Token expired"

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–∏—Ç–µ access_token –≤ Social Media Credentials

### –ü—Ä–æ–±–ª–µ–º–∞: "Webhook –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è"

**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook –∞–∫—Ç–∏–≤–µ–Ω: Webhooks ‚Üí Webhooks
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ target_platforms: –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω—É–∂–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Make.com

### –ü—Ä–æ–±–ª–µ–º–∞: "–î—É–±–ª–∏–∫–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–π"

**–†–µ—à–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç existing_posts –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π. –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞, –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç.

---

## API Endpoints

### Callback –æ—Ç Make.com (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**POST** `/api/webhooks/social-media-callback/`

Request body:
```json
{
  "task_id": 123,
  "platform": "instagram",
  "status": "published",
  "post_url": "https://instagram.com/p/...",
  "post_id": "123456789"
}
```

Response:
```json
{
  "status": "ok",
  "message": "Status updated for task 123 on instagram"
}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Access tokens —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î)
- Webhook endpoints –æ—Ç–∫—Ä—ã—Ç—ã (–¥–ª—è Make.com)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥–ø–∏—Å–∏ –≤ SocialMediaCallbackView

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Retry –ª–æ–≥–∏–∫–∞

–í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Celery –∑–∞–¥–∞—á—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–∞ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø—É–±–ª–∏–∫–∞—Ü–∏–π:

```python
@shared_task
def retry_failed_social_posts():
    """–ü–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏."""
    failed_posts = SocialMediaPost.objects.filter(
        status='failed',
        retry_count__lt=3
    )
    
    for post in failed_posts:
        # Retry logic...
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–π:

```python
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º
SocialMediaPost.objects.values('platform').annotate(
    total=Count('id'),
    published=Count('id', filter=Q(status='published'))
)
```

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Python –ø–∞–∫–µ—Ç—ã

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- `requests` - –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤ (—É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å)
- Django 4.x+ - –¥–ª—è JSONField

### Docker

–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```bash
docker compose build quiz_backend
docker compose restart quiz_backend
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
docker compose exec quiz_backend python manage.py migrate tasks
docker compose exec quiz_backend python manage.py migrate webhooks
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –¢–µ—Å—Ç API (Pinterest)

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ credentials –¥–ª—è Pinterest
2. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `published=True`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å—å "üåê –ê–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á–∏ X –≤ —Å–æ—Ü—Å–µ—Ç–∏"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Pinterest - –ø–∏–Ω –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ –¥–æ—Å–∫–µ
6. –í –∞–¥–º–∏–Ω–∫–µ ‚Üí Social Media Posts - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"

### 2. –¢–µ—Å—Ç Webhook (Instagram —á–µ—Ä–µ–∑ Make.com)

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ Make.com
2. –î–æ–±–∞–≤—å—Ç–µ webhook –≤ Django –∞–¥–º–∏–Ω–∫–µ
3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Make.com - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏–π—Ç–∏
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Instagram - –ø–æ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è

### 3. –†—É—á–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á
2. –í—ã–±–µ—Ä–∏—Ç–µ –∏—Ö –≤ —Å–ø–∏—Å–∫–µ
3. Actions ‚Üí "üì± –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —Å–æ—Ü—Å–µ—Ç–∏"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∞–¥–º–∏–Ω–∫–∏

---

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—é?**
A: –î–∞, –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–∏–≥–Ω–∞–ª `auto_publish_to_social_media` –≤ `tasks/signals.py`

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É?**
A: 
1. –î–ª—è API: —Å–æ–∑–¥–∞–π—Ç–µ `platforms/new_platform_api.py`
2. –î–æ–±–∞–≤—å—Ç–µ –≤ `API_PLATFORMS` –∏–ª–∏ `WEBHOOK_PLATFORMS`
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ `_publish_via_api()` –∏–ª–∏ `_publish_via_webhook()`

**Q: –ú–æ–∂–Ω–æ –ª–∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã?**
A: –î–∞, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ credentials (is_active=False) –∏–ª–∏ webhook

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `error_message` –≤ Social Media Posts –∏ retry_count. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ action "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ —Å–æ—Ü—Å–µ—Ç–∏" –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–ø—ã—Ç–∫–∏.

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `quiz_backend_logs/debug.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å—ã –≤ Social Media Posts
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ credentials –∏ webhooks –≤ –∞–¥–º–∏–Ω–∫–µ

